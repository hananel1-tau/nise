<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>NISE</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
</head>

<body id="page-top">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="#page-top"><img src="assets/img/logo.jpg" /> NISE Monitoring</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fas fa-bars ms-1"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                    <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="#installation">Installation</a></li>
                    <li class="nav-item"><a class="nav-link" href="#server">Server</a></li>
                    <li class="nav-item"><a class="nav-link" href="#website">Website</a></li>
                    <li class="nav-item"><a class="nav-link" href="#device">Device</a></li>
                    <li class="nav-item"><a class="nav-link" href="#challenges">Challenges</a></li>
                    <li class="nav-item"><a class="nav-link" href="#team">Team</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Masthead-->
    <header class="masthead" id="home">
        <div class="container">
            <div class="masthead-subheading">It's NISE To Meet You!</div>
            <div class="masthead-heading text-uppercase">For all your non-intrusive protection needs!</div>
        </div>
    </header>
    <!-- About-->
    <section class="page-section" id="about">
        <div class="container">
            <div>
                <h2 class="section-heading text-uppercase text-center">What is NICE?</h2>
                <h3 class="section-subheading">
                    <br>
                    Many elderly people who live alone (in private apartments or elderly houses), while still mostly
                    independent, might have some difficulties with day to day activities. Those of them who are having
                    trouble accepting these difficulties or are very privy about their privacy, are often refusing any
                    sort of intrusive monitoring systems, like cameras or any sort of wearable monitoring technology.
                    This refusal often leads to conflicts between them and their families/caregivers, and might result
                    in them not having any monitoring at all.<br><br>

                    Our NISE (Non-Intrusive Smart Elderly) Monitoring System provides the elderly with an
                    easy-to-install non-intrusive monitoring system in their house, that doesn't require of them any
                    active actions (like turning on cameras or putting on wearable devices), but still provides them
                    necessary supervision, and their families and caregivers - greater peace of mind over the well-being
                    and safety of their relatives.<br><br>

                    Through the help of PIR sensors, our system is able to monitor daily activities habits, and alert
                    caregivers when irregular patterns are detected, as per their pre-configured alerts logic, or, if
                    they choose to, as per our anomaly detection logic.<br><br>

                    With our system, caregivers are able to view the activity from all sensors, or just some of them.
                    With our dashboard, they can see how the activity is changing between different hours of the day,
                    between different days of the week, and between different sensors.<br><br>

                    They can also set smart alerts, to notify them via SMS about anything they want, for example:
                    <ul>
                        <li>Alert when there wasn't any activity from some sensor for more then some threshold.</li>
                        <li>Alert when the person has been in the same room for more than some threshold.</li>
                    </ul>

                    The NISE monitoring system is a great product both for elderly homes, where staff can use it to more
                    easily offer help and care, and for private homes where only one person lives.<br><br>

                    Aside from eldely people, it can also be useful for any person with disabilities who lives alone,
                    both for continuous or just temporary (while recovering from accidents, for example) supervision.
                </h3>
            </div>
        </div>
    </section>
    <!-- Installation-->
    <section class="page-section" id="installation">
        <div class="container">
            <div>
                <h2 class="section-heading text-uppercase text-center">Installation</h2>
                <h3 class="section-subheading">
                    <br>
                    Our installation process is very simple:
                    <br>
                    <br>
                    <ol>
                        <li>The customer receives the devices and a QR code and device ID for each one.</li>
                        <li>The customer scans the QR code on each device, leading them to our website to configure it.
                        </li>
                        <li>After the customer logs in, they configure the device by giving it a name and setting its
                            location. No need to worry about the device ID, we've filled that in for you!</li>
                        <li>The customer physically places the devices at the appropriate places, like the bathroom, and
                            turns them on.</li>
                    </ol>
                    Alternatively, the customer can log into our website and manually register the device using the
                    corresponding device ID.
                </h3>
            </div>
        </div>
    </section>
    <!-- Server-->
    <section class="page-section" id="server">
        <div class="container">
            <div>
                <h2 class="section-heading text-uppercase text-center">Server</h2>
                <h3 class="section-subheading">
                    <br>
                    <ul>
                        <li>Our backend runs on multiple FunctionApps on the azure cloud service.
                            The backend has two API's - device API for receiving device telemetry and website API
                            supplying access to the data stored in the database.
                            In addition the backend runs a periodic logic to check if a new notification/alert should be
                            created.</li>
                        <li>Each telemetry from the device is received in the IoT Hub, and triggers an event in a
                            special Event Hub.
                            Those events from all devices are processed to extract the information about the sending
                            device and the measured
                            distance and those are stored in the Telemetry table. The raw telemetry data (before
                            processing) is also stored in a RawData table with data retention of one day,
                            this is done for investigation purposes, and used to understand unexpected behavior of the
                            system.</li>
                        <li> The alert detection runs every five minutes, and checks all the stored alert rules. A rule
                            specifies the device it is
                            associated with and the scenario in which an alert should be triggered. For each such rule
                            the relevant telemetries since the last check are
                            processed and alert is created if needed. Alert can be marked as resolved to symbolize that
                            the user saw this alert and acknowledged it.</li>
                        <li> The Website API supports HTTP requests for user / devices / telemetries / alerts / rules.
                            Each entity has its own HTTP endpoint that allows
                            receiving data and creating new data when necessary (i.e. user). To filter the query
                            parameters can be passed such as userId or timestamp.</li>
                        <div>
                            <img class="img-fluid" src="assets/img/table_relations.png" />
                        </div>
                        <li>
                            <b>Azure services in use:</b>
                            <ul>
                                <li>Table storage</li>
                                <li>Iot Hub</li>
                                <li>Event Hub</li>
                                <li>Function Apps</li>
                            </ul>
                            <br>
                            *Alert to phone service - Not available for our subscription, but intended for use.
                        </li>
                    </ul>
                </h3>
            </div>
        </div>
    </section>
    <!-- Website-->
    <section class="page-section" id="website">
        <div class="container">
            <div>
                <h2 class="section-heading text-uppercase text-center">Website</h2>
                <h3 class="section-subheading">
                    <br>
                    Our website's frontend is written in <b>Typescript</b> with <b>React JS</b>, and <b>Material-UI</b>
                    as our design library.<br>
                    For authentication, we use <b>Auth0</b> - a secure and adaptable authentication and authorization
                    platform. That way, our users don't have to create a special account to use our services - they can
                    just use their existing Google account.<br>
                    <br>
                    From our website, the users can log into their account and perform the following actions:
                    <ul>
                        <li>Manage the caregiver's and tenant's personal data.</li>
                        <li>View all the data for their house, such as:
                            <ul>
                                <li>Recent/all activities.</li>
                                <li>Data for each specific device.</li>
                                <li>Aggregated data over weekdays and hours, to provide insight and allow the customer
                                    to make more useful alerts.</li>
                            </ul>
                        </li>
                        <li>Add, manage and remove devices from their house.</li>
                        <li>Create, manage and remove alerts.</li>
                    </ul>
                    The website is hosted in Azure's <b>app Services</b>.
                </h3>
                <div>
                    <img class="img-fluid" src="assets/img/website_partly_blurred.png" />
                </div>
            </div>
        </div>
    </section>
    <!-- Device-->
    <section class="page-section bg-light" id="device">
        <div class="container">
            <div>
                <h2 class="section-heading text-uppercase text-center">Device</h2>
                <div>
                    <br>
                    <h3 class="section-subheading text-muted">
                        We used an ESP8266 device with one PIR (i.e., motion detection) sensor. Once every half a
                        minute, or when enough events are detected, the device sends the events to the cloud to be
                        processed, which are used to create the alerts.<br><br>

                        The device is given to the customer with a device ID and WiFi credentials already embedded in
                        its code.<br>
                        To save battery, the device switches off WiFi when not using it.<br><br>

                        The device runs with the following logic:<br><br>
                        <ol type="1">
                            <li>On startup, The device connects to a preconfigured WiFi network, initializes its
                                internal clock using NTP and switches WiFi off.</li>
                            <li>After initialization, the devices runs the following loop:
                                <ol type="a">
                                    <li>It checks the PIR sensor's state.</li>
                                    <li>If the PIR sensor's state has changed, save this event in an events buffer.</li>
                                    <li>When the events buffer is full or half a minute has passed since the last
                                        transmission, the device connects to the preconfigured WiFi network, connects to
                                        the cloud, sends the events and switches WiFi off again.</li>
                                </ol>
                            </li>
                        </ol>
                    </h3>
                    <div style="float:left;">
                        <img class="img-fluid" src="assets/img/schematics.png" />
                    </div>
                    <img class="img-fluid" src="assets/img/device.jpg" />
                </div>
            </div>
        </div>
    </section>
    <!-- Challenges-->
    <section class="page-section" id="challenges">
        <div class="container">
            <div>
                <h2 class="section-heading text-uppercase text-center">Challenges & Solutions</h2>
                <h3 class="section-subheading">
                    <br>
                    <ul> <b>Device Challenges:</b><br>
                        <li>
                            The PIR sensor's capture angle: <br>
                            Our PIR sensor has a wide angle. Therefore, it captures movement in the general vicinity of
                            it, and not just movement directly in front of it, which is the desired behaviour.<br>
                            Our solution to this problem is to partially "blind" the sensor - we wrap it in a box which
                            blocks everything not in front of it.
                        </li>
                        <br>
                        <li>
                            The ESP8266 and switching WiFi on & off: <br>
                            Since we want to save battery, we need to switch WiFi off when not transmitting events to
                            the cloud. This sometimes caused the device to crash and restart because of its software
                            watchdog - the ESP8266 has a software watchdog which expects to be signalled every once in a
                            while. This is usually done at the end of the loop, which is quick enough, but transmitting
                            events - which includes connecting to WiFi, connecting to the cloud, sending the events and
                            switching WiFi off - takes too much time.<br>
                            Our solution to this problem is to signal the software watchdog manually in several points,
                            like after connecting to WiFi and after connecting to the cloud.
                        </li>
                    </ul>
                    <br>
                    <ul> <b>backend Challenges:</b><br>
                        <li>
                            Alert Once: <br>
                            Since the alert detection logic runs every five minutes there is a chance that
                            an alert would be created every five minutes for every rule.
                            For example if a rule creates an alert when we don't see telemetry from a device for two
                            hours. After two hours without telemetries the logic will create an alert,
                            five minutes later if no new telemetry arrives the alert logic will create a new alert, and
                            so on.<br>
                            To prevent that, we mark every alert with the time of the most recent telemetry that exists
                            in the DB when the alert is created. If no new telemetry arrives
                            we will notice it is the same time and won't create a new alert.
                        </li>
                        <br>
                        <li>
                            Auto Increment Ids: <br>
                            The database doesn't support auto increment fields, and the function app
                            doesn't have a persistent state. To solve that we had to create our own dedicated table to
                            save state.
                            This means that we need to handle asynchronous requests to make sure no duplicate ids are
                            created.
                        </li>
                    </ul>
                </h3>
            </div>
        </div>
    </section>
    <!-- Team-->
    <section class="page-section bg-light" id="team">
        <div class="container">
            <div class="text-center">
                <h2 class="section-heading text-uppercase">Our Team</h2>
                <h3 class="section-subheading text-muted">
                    This project was submitted by Yotam Roichman, Batel Mankovsky & Tomer Hananel.<br>
                    At the time of submission, we were all third year students in Computer Science students at Tel Aviv
                    University.<br>
                    This workshop was guided by Sivan Toledo and Nir Levy.<br>
                    August 17th, 2022.
                </h3>
            </div>
        </div>
    </section>
    <!-- Footer-->
    <footer class="footer py-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-4 text-lg-start">Copyright &copy; NISE 2022</div>
            </div>
        </div>
    </footer>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
    <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
    <!-- * *                               SB Forms JS                               * *-->
    <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
    <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
    <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
</body>

</html>